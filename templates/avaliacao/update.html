{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="row">
  <div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h1 class="card-title">Editar Avaliação</h1> 
        <h4 class="card-description">
          Altere os campos abaixo para atualizar a avaliação do projeto <strong>{{ instance.projeto.nome }}</strong>.
        </h4>

        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" role="alert">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}

        <form method="post" action="">
          {% csrf_token %}
          {{ form.as_p }}

          <hr>
          <h4 class="card-description">Notas por Critério (0 a 10)</h4>

          {% for item in criterios_com_notas %}
            <div class="form-group">
                <label for="nota_criterio_{{ item.criterio.id }}">
                    <strong>{{ item.criterio.nome }} (Peso: {{ item.criterio.peso }})</strong>
                </label>
                <p class="text-muted" style="margin-bottom: 5px;">{{ item.criterio.descricao }}</p>
                <input 
                    type="number" 
                    class="form-control" 
                    name="nota_criterio_{{ item.criterio.id }}" 
                    id="nota_criterio_{{ item.criterio.id }}" 
                    value="{{ item.nota_atual }}" 
                    min="0" 
                    max="10" 
                    required
                >
            </div>
          {% endfor %}

          <a href="{% url 'avaliacao:avaliacao_index' %}" class="btn btn-dark">Cancelar</a>
          <button type="submit" class="btn btn-primary ml-2">Salvar Alterações</button>
        </form>

      </div>
    </div>
  </div>
</div>
{% endblock %}